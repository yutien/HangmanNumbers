<meta name="viewport" content="width=device-width">

<link rel="stylesheet" type="text/css" id="defaultCSS" href="default.css"></link>
<script type="text/javascript" language="javascript" src="jquery-3.4.1.js"></script>

<div>
    <h1>Hangman Numbers</h1>
</div>
<BR>
<input type="button"    class="Button"  id="btnStart"   value="Start"></input>
<input type="text"      class="Text"    id="n1"         value="?" readonly></input>
<input type="text"      class="Text"    id="n2"         value="?" readonly></input>
<input type="text"      class="Text"    id="n3"         value="?" readonly></input>
<span>=</span>
<input type="text"      class="Text"    id="n4"         type="number" pattern="\d*"></input>
<input type="button"    class="Button"  id="btnOkay"    value="Okay" disabled></input>
<BR>
<img id="myImg" src="v0.png">

<script>
function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min) ) + min;
}

var maxValue = 100;
function setBgPosition() {
    function run() {
        var v1 = getRndInteger(1, maxValue);
        var v2 = getRndInteger(1, 10);
        var v3 = 0;
        if((v2 % 2) == 0) {
            $('#n2').val('+');
            v3 = getRndInteger(1, maxValue - v1);
        }
        else{
            $('#n2').val('-');
            v3 = getRndInteger(1, v1);
        }
        $('#n1').val(v1);
        $('#n3').val(v3);
    }
    return setInterval(run, 100);
}

var timer = null;
$('#btnStart').click(function(){
    if(timer == null) {
        if(numberOfWrong >= 6) {
            numberOfWrong = 0;
            $('#myImg').attr('src', 'v0.png');
        }
    
        timer = setBgPosition();
        $('#n4').val('');
        $('#btnStart').val('Stop');
        $('#btnOkay').prop('disabled', true);
    }
    else {
        clearInterval(timer);
        timer = null;
        $('#btnStart').val('Start').prop('disabled', true);
        $('#btnOkay').prop('disabled', false);
        $('#n4').focus();
    }
});

function RightAnswer() {
    alert('Good Job!')
    $('#btnStart').prop('disabled', false);
    $('#btnStart').click();
}

var numberOfWrong = 0;
function WrongAnswer() {
    numberOfWrong ++;
    $('#myImg').attr('src', 'v' + numberOfWrong + '.png');
    
    $('#n4').val('');
    $('#n4').focus();
    alert('Good try, please try again!');
    if(numberOfWrong >= 6) {
        $('#btnStart').prop('disabled', false);
        $('#btnStart').val('Restart');
        $('#btnOkay').prop('disabled', true);
    }
}

$('#btnOkay').click(function(){
    var n1 = parseInt($('#n1').val());
    var n2 = $('#n2').val();
    var n3 = parseInt($('#n3').val());
    var n4 = parseInt($('#n4').val());

    var result = 0;
    if(n2 == '+') {
        result = n1 + n3;
    }
    else {
        result = n1 - n3;
    }
    
    if(result == n4){
        RightAnswer();
    }
    else {
        WrongAnswer();
    }
});
</script>