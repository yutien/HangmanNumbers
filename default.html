<link rel="stylesheet" type="text/css" id="defaultCSS" href="default.css"></link>
<script type="text/javascript" language="javascript" src="jquery-3.4.1.js"></script>

<div>
    <h1>Hangman Numbers</h1>
</div>
<button id="btnStart"><h1>Start</h1></button>
<input id="n1" value="?" readonly></input>
<input id="n2" value="?" readonly></input>
<input id="n3" value="?" readonly></input>
<span>=</span>
<input id="n4" type="number"></input>
<button id="btnOkay" disabled><h1>Okay</h1></button>

<img id="myImg" src="v0.png">

<script>
function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min) ) + min;
}

function setBgPosition() {
    function run() {
        var v1 = getRndInteger(1, 100);
        var v2 = getRndInteger(1, 100);
        var v3 = getRndInteger(1, 100 - v1);
        
        $('#n1').val(v1);
        if((v2 % 2) == 0) {
            $('#n2').val('+');
        }
        else{
            $('#n2').val('-');
        }
        $('#n3').val(v3);
    }
    return setInterval(run, 100);
}

var timer = null;
$('#btnStart').click(function(){
    if(timer == null) {
        if(numberOfWrong >= 6) {
            numberOfWrong = 0;
            $('#myImg').attr('src', 'v0.png');
        }
    
        timer = setBgPosition();
        $('#btnStart').html('<h1>Stop</h1>');
        $('#btnOkay').prop('disabled', true);
    }
    else {
        clearInterval(timer);
        timer = null;
        $('#btnStart').html('<h1>Start</h1>').prop('disabled', true);
        $('#btnOkay').prop('disabled', false);
        $('#n4').focus();
    }
});

function RightAnswer() {
    alert('Good Job!')
    $('#btnStart').prop('disabled', false);
    $('#btnStart').click();
}

var numberOfWrong = 0;
function WrongAnswer() {
    numberOfWrong ++;
    $('#myImg').attr('src', 'v' + numberOfWrong + '.png');
    
    $('#n4').val('');
    $('#n4').focus();
    alert('Good try, please try again!');
    if(numberOfWrong >= 6) {
        $('#btnStart').prop('disabled', false);
        $('#btnStart').html('<h1>Restart</h1>');
        $('#btnOkay').prop('disabled', true);
    }
}

$('#btnOkay').click(function(){
    var n1 = parseInt($('#n1').val());
    var n2 = $('#n2').val();
    var n3 = parseInt($('#n3').val());
    var n4 = parseInt($('#n4').val());

    var result = 0;
    if(n2 == '+') {
        result = n1 + n3;
    }
    else {
        result = n1 - n3;
    }
    
    if(result == n4){
        RightAnswer();
    }
    else {
        WrongAnswer();
    }
});
</script>