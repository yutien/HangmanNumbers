<meta name="viewport" content="width=device-width">

<script type="text/javascript" language="javascript" src="jquery-3.4.1.js"></script>

<div style="width: 100%; color: purple; background: pink; display: flex; flex-direction: column; justify-content: center; text-align: center;">
    <h1>Hangman Numbers</h1>
</div>
<BR>
<table style="width: 100%;">
    <tr>
        <td style="width: 0px; vertical-align: bottom;">
            <span id="lblMsg"
                  style="width: 100%; font-size: 18px; padding: 20px; display: none;">
            </span>
            <img id="myImg" src="v0.png">
        </td>
        <td style="width: 100%; vertical-align: text-top;">
            <input type="button" id="btnStart" value="Start" 
                   style="width: 100%; height: 64px; font-size: 28px;">
            </input>
            <table border="0" 
                   style="width: 100%; margin-top: 20px;">
                <tr>
                    <td style="width: 30%; text-align: right;">
                    </td>
                    <td style="width: 30%; text-align: right;">
                        <input type="text" id="n1" value="?" readonly
                               style="width: 100%; font-size: 32px; text-align: right; border: 0px;">
                        </input>
                    </td>
                    <td style="width: 40%; text-align: right;">
                    </td>
                </tr>
                <tr>
                    <td style="width: 30%; text-align: right;">
                        <input type="text" id="n2" value="?" readonly
                               style="width: 100%; font-size: 32px; text-align: right; border: 0px;">
                        </input>
                    </td>
                    <td style="width: 30%; text-align: right;">
                        <input type="text" id="n3" value="?" readonly
                               style="width: 100%; font-size: 32px; text-align: right; border: 0px;">
                        </input>
                    </td>
                    <td style="width: 40%; text-align: right;">
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <hr>
                    </td>
                </tr>
                <tr>
                    <td style="width: 30%; text-align: right;">
                        <input type="text" value="=" readonly
                               style="width: 100%; font-size: 32px; text-align: right; border: 0px;">
                        </input>
                    </td>
                    <td style="width: 30%; text-align: right;">
                        <input type="number" id="n4" pattern="[0-9]*"
                               style="width: 100%; height: 64px; font-size: 32px; text-align: right;">
                        </input>
                    </td>
                    <td style="width: 40%; text-align: right;">
                        <input type="button" id="btnOkay" value="Okay" disabled
                               style="width: 100%; height: 64px; font-size: 28px;">
                        </input>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
<BR>

<script>
function getRndInteger(min, max) {
  return Math.floor(Math.random() * (max - min) ) + min;
}

var maxValue = 100;
function setBgPosition() {
    function run() {
        var v1 = getRndInteger(1, maxValue);
        var v2 = getRndInteger(1, 10);
        var v3 = 0;
        if((v2 % 2) == 0) {
            $('#n2').val('+');
            v3 = getRndInteger(1, maxValue - v1);
        }
        else{
            $('#n2').val('-');
            v3 = getRndInteger(1, v1);
        }
        $('#n1').val(v1);
        $('#n3').val(v3);
    }
    return setInterval(run, 80);
}

var timer = null;
$('#btnStart').click(function(){
    if(timer == null) {
        if(numberOfWrong >= 6) {
            numberOfWrong = 0;
            $('#myImg').attr('src', 'v0.png');
        }
    
        timer = setBgPosition();
        $('#n4').val('');
        $('#btnStart').val('Stop');
        $('#btnOkay').prop('disabled', true);
    }
    else {
        clearInterval(timer);
        timer = null;
        $('#btnStart').val('Start').prop('disabled', true);
        $('#btnOkay').prop('disabled', false);
        $('#n4').focus();
    }
});

function RightAnswer() {
    $('#lblMsg').text('Good Job!');
    $('#lblMsg').show(1000).css('background', '#ccffff').css('color', '#6633ff');
    $('#btnStart').prop('disabled', false);
    setTimeout(function(){ 
        $('#lblMsg').hide();
        $('#btnStart').click();
    }, 3000);
}

var numberOfWrong = 0;
function WrongAnswer() {
    numberOfWrong ++;
    $('#myImg').attr('src', 'v' + numberOfWrong + '.png');
    
    $('#n4').focus().val('');
    $('#lblMsg').text('Good try, please try again!');
    $('#lblMsg').show(1000).css('background', '#ffff99').css('color', '#ff0033');
    if(numberOfWrong >= 6) {
        $('#btnStart').prop('disabled', false);
        $('#btnStart').val('Restart');
        $('#btnOkay').prop('disabled', true);
    }
    setTimeout(function(){ $('#lblMsg').hide(); }, 3000);
}

$('#btnOkay').click(function(){
    var n1 = parseInt($('#n1').val());
    var n2 = $('#n2').val();
    var n3 = parseInt($('#n3').val());
    var n4 = parseInt($('#n4').val());

    var result = 0;
    if(n2 == '+') {
        result = n1 + n3;
    }
    else {
        result = n1 - n3;
    }
    
    if(result == n4){
        RightAnswer();
    }
    else {
        WrongAnswer();
    }
});
</script>